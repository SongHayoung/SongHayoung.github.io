<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="[CockroachDB] SQL Layer"><meta name="keywords" content="DB"><meta name="author" content="Song Hayoung"><meta name="copyright" content="Song Hayoung"><title>[CockroachDB] SQL Layer | SUMFIのBlog</title><link rel="shortcut icon" href="/songcon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-169368422-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"7LZ6OJ4D6C","apiKey":"9a84e13f74ea78c3fd54512c10139c56","indexName":"git blog","hits":{"per_page":10},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss2.xml" title="SUMFIのBlog" type="application/rss+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Layer"><span class="toc-number">1.</span> <span class="toc-text">SQL Layer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Overview"><span class="toc-number">2.</span> <span class="toc-text">Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Interactions-with-other-layers"><span class="toc-number">2.1.</span> <span class="toc-text">Interactions with other layers</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Components"><span class="toc-number">3.</span> <span class="toc-text">Components</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Relational-structure"><span class="toc-number">3.1.</span> <span class="toc-text">Relational structure</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-API"><span class="toc-number">3.2.</span> <span class="toc-text">SQL API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PostgreSQL-wire-protocol"><span class="toc-number">3.3.</span> <span class="toc-text">PostgreSQL wire protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-parser-planner-executor"><span class="toc-number">3.4.</span> <span class="toc-text">SQL parser, planner, executor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Parsing"><span class="toc-number">3.4.1.</span> <span class="toc-text">Parsing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Logical-planning"><span class="toc-number">3.4.2.</span> <span class="toc-text">Logical planning</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Physical-planning"><span class="toc-number">3.4.3.</span> <span class="toc-text">Physical planning</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Query-execution"><span class="toc-number">3.4.4.</span> <span class="toc-text">Query execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vectorized-query-execution"><span class="toc-number">3.4.5.</span> <span class="toc-text">Vectorized query execution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Encoding"><span class="toc-number">3.5.</span> <span class="toc-text">Encoding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DistSQL"><span class="toc-number">3.6.</span> <span class="toc-text">DistSQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Schema-changes"><span class="toc-number">4.</span> <span class="toc-text">Schema changes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Technical-interactions-with-other-layers"><span class="toc-number">5.</span> <span class="toc-text">Technical interactions with other layers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-and-transaction-layer"><span class="toc-number">5.1.</span> <span class="toc-text">SQL and transaction layer</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars3.githubusercontent.com/u/37806785?s=460&amp;u=8c68d685faf7c5280cfbd736a6b1730b55fb4203&amp;v=4"></div><div class="author-info__name text-center">Song Hayoung</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/hayoung-song-9523b61bb/">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">11043</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">196</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">62</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">VISITED</div><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Seoul Korea</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Jeju Korea</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">British Columbia Canada</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Boracay Philippines</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">三重　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">大阪　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">名古屋　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">静岡　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">札幌　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">京都　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Bangkok Thailand</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://xxxx.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SUMFIのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">[CockroachDB] SQL Layer</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2024-01-14</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Cockroach-DB/">Cockroach DB</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1.2k</span><span class="post-meta__separator">|</span><span>Reading time: 7 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="SQL-Layer"><a href="#SQL-Layer" class="headerlink" title="SQL Layer"></a>SQL Layer</h2><span id="more"></span>
<p>Cockroach DB 아키텍처의 SQL 계층은 개발자에게 SQL API를 노출하고 고수준의 SQL 문을 기본 KV Store에 대한 낮은 수준의 읽기 및 쓰기 요청으로 변환해 트랜잭션 계층으로 전달한다.</p>
<ul>
<li>SQL API, 사용자 인터페이스를 형성</li>
<li>Parser, SQL 텍스트를 추상 구문 트리(AST)로 변환</li>
<li>Cost-based optimizer, AST를 최적화된 논리적 쿼리 계획으로 변환</li>
<li>Physical Planner, 논리적 쿼리 플랜을 클러스터의 하나 이상의 노드에서 실행할 수 있도록 지원</li>
<li>SQL execution engine, KV Store에 대한 읽기 및 쓰기 요청을 수행</li>
</ul>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Cockroach DB 클러스터의 각 노드는 대칭적으로 작동하기 때문에 개발자는 어느 노드에서나 요청을 보낼 수 있다. 요청을 수신하는 노드는 요청을 처리하고 클라이언트에 응답하는 게이트웨이 노드 역할을 한다.</p>
<p>클러스터에 대한 요청은 SQL 문으로 도착하지만, 데이터는 궁극적으로 스토리지 계층에서 KV 쌍으로 쓰여지고 읽혀진다. 이를 처리하기 위해 SQL 계층은 SQL문을 KV operation plan으로 변환한 뒤 트랜잭션 계층으로 전달한다.</p>
<h3 id="Interactions-with-other-layers"><a href="#Interactions-with-other-layers" class="headerlink" title="Interactions with other layers"></a>Interactions with other layers</h3><ul>
<li>SQL API를 통해 외부로부터 요청 수신</li>
<li>SQL 문을 저레벨 KV operation으로 변환해 트랜잭션 계층에 요청으로 전달</li>
</ul>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><h3 id="Relational-structure"><a href="#Relational-structure" class="headerlink" title="Relational structure"></a>Relational structure</h3><p>Cockroach DB는 저당된 데이터를 마치 행과 열로 구성된 관계형 구조처럼 데이터를 노출한다. 행과 열의 집합은 다시 테이블로 구성된다. 그 뒤 테이블 모음은 데이터베이스로 구성된다. Cockroach DB는 제약 조건과 같은 일반적 관계형 기능을 제공한다. 이런 기능 덕에 애플리케이션 개발자는 데이터베이스가 애플리케이션 데이터의 일관된 구조화를 보장한다는 것을 신뢰할 수 있으며 데이터 유효성 검사를 애플리케이션 로직에 별도로 구축할 필요가 없다.</p>
<h3 id="SQL-API"><a href="#SQL-API" class="headerlink" title="SQL API"></a>SQL API</h3><p>Cockroach DB는 관계형 구조를 나타내기 위해 대부분의 ANSI SQL 표준을 구현한다. 중요한 점은 개발자가 SQL API를 통해 다른 데이터베이스를 사용할 때와 같이 ACID 시맨틱 트랜잭션에 액세스할 수 있다는 점이다.</p>
<h3 id="PostgreSQL-wire-protocol"><a href="#PostgreSQL-wire-protocol" class="headerlink" title="PostgreSQL wire protocol"></a>PostgreSQL wire protocol</h3><p>SQL 쿼리는 PstgreSQL 와이어 프로토콜을 통해 클러스터에 도달한다. 이 프로토콜은 많은 PostgreSQL 호환 드라이버와 ORM을 지원해 애플리케이션을 클러스터에 간편하게 연결할 수 있다.</p>
<h3 id="SQL-parser-planner-executor"><a href="#SQL-parser-planner-executor" class="headerlink" title="SQL parser, planner, executor"></a>SQL parser, planner, executor</h3><p>Cockroach DB 클러스터의 노드가 클라이언트로부터 SQL 요청을 받으면, 해당 문을 파싱하고 최적화된 논리적 쿼리 계획을 생성한 뒤 물리적 쿼리 계획으로 변환한다. 마지막으로 이 계획을 실행한다.</p>
<h4 id="Parsing"><a href="#Parsing" class="headerlink" title="Parsing"></a>Parsing</h4><p>SQL 쿼리는 지원되는 구문을 설명하는 <code>yacc</code> 파일에 대해 구문 분석되며 각 쿼리의 SQL 버전은 AST로 변환된다.</p>
<h4 id="Logical-planning"><a href="#Logical-planning" class="headerlink" title="Logical planning"></a>Logical planning</h4><ol>
<li>AST는 고수준의 논리적 쿼리 계획으로 변환된다. 이 변환 과적에서 Cockroach DB는 다음과 같은 작업을 포함하는 의미론적 분석도 수행한다.<ul>
<li>쿼리가 SQL 언어에서 유효한 문인지 확인한다.</li>
<li>테이블이나 변수의 이름과 같은 명칭을 해당 값으로 해석한다.</li>
<li>Constant folding, <code>0.6 + 0.4</code>를 <code>1.0</code>으로 대체하는 등 불필요한 중간 계산을 제거한다.</li>
<li>쿼리에 하나 이상의 하위 쿼리가 포함된 경우와 같이 중간 결과에 사용할 데이터 유형을 확정한다.</li>
</ul>
</li>
<li>논리적 계획은 항상 유효한 일련의 변환을 사용해 단순화한다. 예를 들어 <code>a BETWEEN b AND c</code>는 <code>a &gt;= b AND a &lt;= c</code>로 변환된다.</li>
<li>논리적 계획은 쿼리를 실행하는 여러 가지 가능한 방법을 평가하고 비용이 가장 적게 드는 실행 계획을 선택하는 검색 알고리즘을 사용해 최적화된다.</li>
</ol>
<h4 id="Physical-planning"><a href="#Physical-planning" class="headerlink" title="Physical planning"></a>Physical planning</h4><p>물리적 계획 단계에서는 range 정보를 기반으로 쿼리 실행에 참여할 노드를 결정한다. 이 단계에서는 데이터가 저장된 위치와 가까운 곳에서 일부 연산을 수행하기 위해 쿼리를 분산할지 여부를 결정한다. 더 자세히 말하면, 물리적 계획 단계에서는 논리 계획에서 생성된 최적화된 논리 계획을 물리적 SQL 연산자의 DAG로 변환시킨다.</p>
<p>분산 계층은 단일 키 공간의 추상화를 제공하기 때문에 SQL 계층은 모든 노드에서 모든 범위에 대해 읽기 및 쓰기 작업을 수행할 수 있다. 따라서 SQL 연산자는 게이트웨이 모드에서 계획하든 분산 모드에서 계획하든 동일하게 작동할 수 있다.</p>
<p>쿼리를 여러 노드에 분산할지 여부는 네트워크를 통해 전송해야 하는 데이터의 양을 추정하는 휴리스틱에 의해 결정된다. 적은 수의 행만 필요한 쿼리는 게이트웨이 노드에서 실행된다. 다른 쿼리는 여러 노드에 분산된다.</p>
<p>예를 들어, 쿼리가 분산되면 물리 계획 단계에서는 논리 계획의 스캔 연산을 스캔으로 읽은 범위를 포함하는 각 노드에 대해 하나씩 여러개의 물리적 TableReader 연산자로 분할한다. 그 뒤 나머지 논리 연산은 tableReader와 동일한 노드에서 스케쥴링 된다. 그 결과 계산이 가능한 한 실제 데이터에 가깝게 수행된다.</p>
<h4 id="Query-execution"><a href="#Query-execution" class="headerlink" title="Query execution"></a>Query execution</h4><p>물리 계획의 컴포넌트는 실행을 위해 하나 이상의 노드로 전송된다. 각 노드에서는 쿼리의 일부를 계산하기 위해 논리 프로세서를 생성한다. 노드 내부 또는 노드 간 논리 프로세서는 데이터의 논리적 흐름을 통해 서로 통신한다. 쿼리의 결합된 결과는 쿼리가 수신된 첫 번째 노드로 다시 전송되어 SQL 클라이언트로 전송된다.</p>
<p>각 프로세서는 쿼리에 의해 조작된 스칼라 값에 인코딩된 형식을 사용한다. 이것은 SQL에서 사용되는 것과는 다른 바이너리 형식이다. 따라서 SQL 쿼리에 나열된 값은 인코딩되어야 하며, 논리 프로세서 간에 통신되고 디스크에서 읽혀진 데이터는 SQL 클라이언트로 다시 전송되기 전에 디코딩 되어야 한다.</p>
<h4 id="Vectorized-query-execution"><a href="#Vectorized-query-execution" class="headerlink" title="Vectorized query execution"></a>Vectorized query execution</h4><p>이 기능이 활성화된 경우 밀리 계획이 노드로 전송되어 벡터화된 실행 엔진에서 처리된다. 물리 계획을 수신하면 벡터화된 엔진이 디스크에서 테이블 데이터 배치를 읽고 데이터를 행 형식에서 열 형식으로 변환한다. 이런 열 데이터 배치는 메모리에 저장되어 엔진이 실행 중에 빠르게 액세스할 수 있다.</p>
<p>백터화된 엔진은 열 데이터의 유형별 배열을 빠르게 반속하는 특수하게 사전 컴파일된 함수를 사용한다. 함수의 열 출력은 엔진이 각 데이터 열을 처리할 때 메모리에 저장된다. 입력 버퍼의 모든 데이터 열을 처리한 후 엔진은 열 형식의 출력을 다시 행 형식으로 변환한 다음 처리된 행을 SQL 인터페이스로 반환한다. 테이블 데이터 배치가 완전히 처리된 후 엔진은 쿼리가 실행될 때까지 처리를 위해 다음 테이블 데이터배치를 읽는다.</p>
<h3 id="Encoding"><a href="#Encoding" class="headerlink" title="Encoding"></a>Encoding</h3><p>SQL 쿼리는 파싱 가능한 문자열로 작성되지만 DB의 하위 계층은 주로 바이트 단위로 처리한다. 즉, SQL 계층에서 쿼리를 실행할 때 문자열로 표현된 행 데이터를 바이트로 변환하고 하위 계층에서 반환된 바이트를 클라이언트에 다시 전달할 수 있는 SQL 데이터로 변환해야 한다.</p>
<p>인덱싱된 열의 경우, 이 바이트 인코딩이 나타내는 데이터 유형과 동일한 정렬 순서를 유지하는 것도 중요하다. 이는 Cockroach DB가 궁극적으로 데이터를 정렬된 KV map에 저장하는 방식 때문인데, 바이트가 나타내는 데이터와 동일한 순서로 저장하면 KV 데이터를 효율적으로 스캔할 수 있다.</p>
<p>그러나 인덱싱되지 않은 열의 경우 공간을 덜 차지하지만 순서를 유지하지 않는 인코딩(value encoding)을 사용한다.</p>
<h3 id="DistSQL"><a href="#DistSQL" class="headerlink" title="DistSQL"></a>DistSQL</h3><p>Cockroach DB는 분산 데이터베이스이므로 일부 쿼리를 위한 분산 SQL 최적화 도구를 개발해 많은 range를 포함하는 쿼리의 속도를 획기적으로 높일 수 있다. 비분산 쿼리에서는 코디네이터 노드가 쿼리와 일치하는 모든 행을 수신한 다음 전체 데이터 세트에 대해 모든 계산을 수행한다.</p>
<p>그러나 DistSQL 호환 쿼리의 경우, 각 노드는 포함된 행에 대해 계산을 수행한 다음 전체 행이 아닌 결과를 집계 노드로 보낸다. 집계 노드는 각 노드의 결과를 집계한 뒤 최종적으로 클라이언트에 단일 응답을 내보낸다.</p>
<p>이렇게 하면 집계 노드로 전송되는 데이터의 양이 크게 줄고, 이미 입증된 병렬 컴퓨팅 개념을 활용해 궁극적으로 복잡한 쿼리를 완료하는 데 걸리는 시간이 단축된다. 또한 이미 데이터를 저장하고 있는 노드에서 데이터를 처리하므로 개별 노드의 저장 공간보다 더 큰 행 집합을 처리할 수 있다.</p>
<ul>
<li>논리적 계획 : AST / planNode Tree와 유사하게 계산 단계를 통한 추상적(비분산적) 데이터 흐름을 나타냄</li>
<li>물리적 계획 : 개념적으로 논리적 계획 노드를 cockroach DB를 실행시키는 물리 머신에 매핑하는 것이다. 논리적 계획 노드는 클러스터 토폴로지에 따라 복제되고 특화된다. PlanNodes와 마찬가지로 물리 계획의 이런 컴포넌트는 클러스터에서 스케쥴링되고 실행된다.</li>
</ul>
<h2 id="Schema-changes"><a href="#Schema-changes" class="headerlink" title="Schema changes"></a>Schema changes</h2><p>스키마 변경 중에 테이블이 온라인 상태를 유지(읽기 및 쓰기 서비스 제공)할 수 있는 프로토콜을 사용해 열 또는 보조 인덱스 추가와 같은 스키마 변경을 수행한다. 이 프로토콜을 사용하면 클러스터의 여러 노드가 서로 다른 시간에 새로운 테이블 스키마로 비동기적으로 전환할 수 있다.</p>
<p>스키마 변경 프로토콜은 각 스키마 변경을 원하는 효과를 얻을 수 있는 일련의 점진적 변경으로 분해한다.</p>
<p>예를 들어, 보조 인덱스를 추가하려면 시작 버전과 종료 버전 사이에 두 개의 중간 스키마 버전이 필요하므로 전체 클러스터에서 쓰기 시 인덱스가 업데이트된 후 읽기에 사용할 수 있게 된다. 스키마가 변경되는 동안 데이터베이스가 일관된 상태를 유지하도록 하기 위해 클러스터에서 항상 이 스키마의 연속적 버전이 최대 두 개 까지만 사용된다는 불변성을 적용한다. 이 접근 방식은 해당 <a target="_blank" rel="noopener" href="https://research.google/pubs/online-asynchronous-schema-change-in-f1/">논문</a>을 기반으로 한다.</p>
<h2 id="Technical-interactions-with-other-layers"><a href="#Technical-interactions-with-other-layers" class="headerlink" title="Technical interactions with other layers"></a>Technical interactions with other layers</h2><h3 id="SQL-and-transaction-layer"><a href="#SQL-and-transaction-layer" class="headerlink" title="SQL and transaction layer"></a>SQL and transaction layer</h3><p>실행된 planNode의 KV operation은 트랜잭션 레이어로 전송된다.</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Song Hayoung</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://songhayoung.github.io/2024/01/14/Cockroach/sql-layer/">https://songhayoung.github.io/2024/01/14/Cockroach/sql-layer/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/DB/">DB</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2024/01/15/PS/Codeforces/2021-icpc-nerc-j/"><i class="fa fa-chevron-left">  </i><span>[Codeforces] 2021-2022 ICPC, NERC, Northern Eurasia Onsite (Unrated, Online Mirror, ICPC Rules, Teams Preferred) J. Job Lookup</span></a></div><div class="next-post pull-right"><a href="/2024/01/14/PS/LeetCode/find-beautiful-indices-in-the-given-array-ii/"><span>[LeetCode] Find Beautiful Indices in the Given Array II</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '3604b61642355579f55e',
  clientSecret: 'f552120f18ac5aee3f6297e05e97d94c0a25cd4b',
  repo: 'SongHayoung.github.io',
  owner: 'SongHayoung',
  admin: 'SongHayoung',
  id: md5(decodeURI(location.pathname)),
  language: 'en'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(https://xxxx.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2024 By Song Hayoung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Learning how to walk slowly to not miss important things</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/algolia.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>