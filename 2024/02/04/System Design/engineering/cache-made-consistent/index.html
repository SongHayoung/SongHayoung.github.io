<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="[Meta] Cache made consistent"><meta name="keywords" content="System Design"><meta name="author" content="Song Hayoung"><meta name="copyright" content="Song Hayoung"><title>[Meta] Cache made consistent | SUMFIのBlog</title><meta name="robots" content="noindex"><link rel="shortcut icon" href="/songcon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-169368422-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"7LZ6OJ4D6C","apiKey":"9a84e13f74ea78c3fd54512c10139c56","indexName":"git blog","hits":{"per_page":10},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss2.xml" title="SUMFIのBlog" type="application/rss+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Cache-made-consistent"><span class="toc-number">1.</span> <span class="toc-text">Cache made consistent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Defining-cache-invalidation-and-cache-consistency"><span class="toc-number">2.</span> <span class="toc-text">Defining cache invalidation and cache consistency</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-do-we-care-about-cache-consistency-at-all"><span class="toc-number">3.</span> <span class="toc-text">Why do we care about cache consistency at all?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-mental-model-of-cache-invalidation"><span class="toc-number">4.</span> <span class="toc-text">A mental model of cache invalidation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reliable-consistency-observability"><span class="toc-number">5.</span> <span class="toc-text">Reliable consistency observability</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Consistency-tracing"><span class="toc-number">6.</span> <span class="toc-text">Consistency tracing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-real-bug-we-found-and-fixed-this-year"><span class="toc-number">7.</span> <span class="toc-text">A real bug we found and fixed this year</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars3.githubusercontent.com/u/37806785?s=460&amp;u=8c68d685faf7c5280cfbd736a6b1730b55fb4203&amp;v=4"></div><div class="author-info__name text-center">Song Hayoung</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/hayoung-song-9523b61bb/">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">10925</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">195</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">61</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">VISITED</div><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Seoul Korea</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Jeju Korea</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">British Columbia Canada</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Boracay Philippines</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">三重　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">大阪　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">名古屋　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">静岡　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">札幌　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">京都　日本</a><a class="author-info-links__name text-center" href="https://songhayoung.github.io/">Bangkok Thailand</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://xxxx.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SUMFIのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">[Meta] Cache made consistent</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2024-02-04</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/System-Design/">System Design</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/System-Design/Engineering/">Engineering</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1.3k</span><span class="post-meta__separator">|</span><span>Reading time: 7 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="Cache-made-consistent"><a href="#Cache-made-consistent" class="headerlink" title="Cache made consistent"></a>Cache made consistent</h2><span id="more"></span>
<p>Meta는 TAO와 Memcache를 포함한 전세계 규모의 캐시 서버의 일관성을 6nine 에서 10nine 으로 향상 시켰다. </p>
<h2 id="Defining-cache-invalidation-and-cache-consistency"><a href="#Defining-cache-invalidation-and-cache-consistency" class="headerlink" title="Defining cache invalidation and cache consistency"></a>Defining cache invalidation and cache consistency</h2><p>정의상 캐시는 데이터의 진실 소스를 보유하지 않는다. 캐시 무효화는 원본 데이터가 변경될 때 오래된 캐시 항목을 능동적으로 무효화하는 프로세스를 설명한다. 캐시 무효화를 잘못 처리하면 원본과 일관성 없는 값이 캐시에 남게 된다.</p>
<p>캐시 무효화는 캐시 자체가 아닌 다른 무언가가 수행해야 하는 작업을 포함한다. 클라이언트나 pub/sub 시스템과 같이 무언가가 캐시에 변이가 발생했음을 알려야 한다. 캐시 최신성을 유지하기 위해 TTL에만 의존하는 것은 cache invalidation을 수행하지 않으므로, 이 포스트에는 논의하지 않는다. 다음은 캐시 불일치가 발생하는 간단한 시나리오다.</p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204222659305.png" alt=""></p>
<p><code>X = 43</code>이 먼저 전달되고, <code>X = 42</code>가 늦게 전달되어 캐시의 최종 상태는 42로 남게된다. 이런 문제를 해결하는 여러 방법중에 하나는 versioning이다. 하지만 <code>X = 42</code>가 도착하기 전에 캐시 항목 <code>X = 43 @ version 2</code>가 제거된다면 캐시 호스트는 최신성에 대한 지식을 잃게 된다.</p>
<h2 id="Why-do-we-care-about-cache-consistency-at-all"><a href="#Why-do-we-care-about-cache-consistency-at-all" class="headerlink" title="Why do we care about cache consistency at all?"></a>Why do we care about cache consistency at all?</h2><p>캐시 불일치는 데이터베이스의 손실만큼 심각하게 여겨진다. 사용자 관점에서는 데이터 손실과 구별할 수 없을 수도 있다. 몇년 전 TAO의 일관성이 떨어졌을 때, 캐시 불일치로 인해 split brain 문제를 발생시켰다.</p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204223022293.png" alt=""></p>
<h2 id="A-mental-model-of-cache-invalidation"><a href="#A-mental-model-of-cache-invalidation" class="headerlink" title="A mental model of cache invalidation"></a>A mental model of cache invalidation</h2><p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204223109942.png" alt=""></p>
<p>Cache invalidation 문제는 어렵다. 간단한 mental model 부터 시작해보자. 캐시는 기본적으로 주소 지정이 가능한 저장 매체에 데이터를 저장하는 stateful service다. 분산 시스템은 본질적으로 state machine이다. 모든 상태 전환이 올바르게 수행되면 예상대로 작동하는 분산 시스템을 갖게 된다. 그렇지 않으면 문제가 생긴다. 따라서 핵심은 “stateful service의 데이터를 변경하는 것은 무엇”인지다.</p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204223258451.png" alt=""></p>
<p>정적 캐시는 매우 단순한 캐시 모델을 가진다. 데이터는 변경할 수 없고, 무효화 불가능하다. 데이터베이스의 경우 데이터는 쓰기 시에만 변형된다. 데이터베이스의 거의 모든 상태 변경에 대한 로그가 있는 경우가 많다. <strong>이상이 발생할 때마다 로그는 발생한 상황을 이해하고, 문제의 범위를 좁히고, 문제를 식별하는데 도움을 준다.</strong> </p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204223426546.png" alt=""></p>
<p>TAO나 Memcache와 같은 동적 캐시의 경우 읽기 및 쓰기 경로 모두에서 데이터가 변경된다. 이런 형태의 access path는 많은 경쟁 조건을 가능하게 하고 Cache invalidation을 어려운 문제로 만든다. 캐시에 있는 데이터는 내구성이 없으므로 충돌 해결에 중요한 버전 정보가 제거되는 경우가 있다. 이런 모든 특성을 결합해 동적 캐시는 상상 이상의 경쟁 조건을 만든다.</p>
<p>또한 모든 캐시 상태 변경을 기록하고 추적하는 것은 거의 비현실 적이다. Read workload를 확장하기 위해 캐시가 도입되는데, 이는 대부분의 캐시 상태 변경이 Cache fill path에서 발생하기 때문이다.</p>
<h2 id="Reliable-consistency-observability"><a href="#Reliable-consistency-observability" class="headerlink" title="Reliable consistency observability"></a>Reliable consistency observability</h2><p> 캐시 무효화 및 캐시 일관성을 해결하기 위한 첫 번째 단계는 측정이다. 캐시 일관성을 측정하고 캐시에 일관되지 않은 항목이 있을 때 알람이 발생해야 한다. False positive는 인간 본질 때문에 발생하지 않아야 한다. 또한 5 nine 이상의 일관성을 측정해야 하기 때문에 측정이 정확해야 한다. Consistency 수정 사항이 적용되면 개선 사항을 정량적으로 측정할 수 있어야 하기 때문이다.</p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204223840699.png" alt=""></p>
<p>측정 문제를 해결하기 위해 Polaris라는 서비스를 구축했다. Stateful service의 anomaly는 클라이언트가 어떤 식으로든 관찰할 수 있는 경우에만 anomaly다. 그렇지 않으면 중요하지 않다. 이 원칙에 따라 Polaris는 클라이언트가 관찰할 수 있는 불변량의 위반을 측정하는데 중점을 둔다.</p>
<p>고수준에서 Polaris는 클라이언트로서 stateful service와 상호작용 하며 서비스 내부에 대한 지식이 없다고 가정한다. 이를 통해 일반화해 Meta에서는 수십개의 Polaris 통합이 있다. <strong>“Cache should eventually be consistent with the database”는 특히 비동기 캐시 무효과가 있는 경우 Polaris가 모니터링하는 일반적인 클라이언트 observation이다.</strong> 이 경우 Polaris는 캐시 서버로 가장해 캐시 무효화 이벤트를 수신한다. 예를 들어 <code>X = 4 @ version 4</code>라는 이벤트를 수신하면 모든 캐시 복제본을 클라이언트로 쿼리해 불변성 위반이 발생하는지 확인한다. 하나의 복제본이 <code>X = 3 @ version 3</code>를 반환하는 경우 Polaris는 이를 불일치로 플래그 지정하고 나중에 동일한 대상 캐시 호스트에 대해 확인하기 위해 샘플을 다시 대기열에 추가한다. Polaris는 특정 기간(1분, 5분, 10분) 주기로 불일치를 보고한다. 이 샘플이 1분후에도 여전히 불일치로 표시되면 Polaris는 이를 해당 기간에 대한 불일치로 보고한다.</p>
<p>Polaris는 백오프 및 재시도를 효율적으로 구현해 Multi-timescale 설계를 통해 오탐 생성 방지를 한다. </p>
<p>다른 예를 살펴보자. Polaris가 <code>X = 4 @ version 4</code> 무효화 이벤트를 받았다고 가정하자. 그러나 캐시 복제본을 쿼리하면 X가 존재하지 않는다는 응답을 받는다. Polaris는 이를 불일치로 표기해야할 지 확실하지 않다. 왜냐하면 <code>version 3</code>가 없고 <code>version 4</code>에 대한 write가 lastest write 이며 실제로 inconsistency가 발생한 상황일 수가 있고, <code>version 5</code>가 <code>version 4</code>를 삭제했기 때문에 발생하는 즉, Polaris가 event 보다 더 최근의 view를 보고있을 수 있기 때문이다.</p>
<p>그래서 이 두 가지를 명확히 하기 위해 데이터베이스에 무엇이 있는지 확인해야 한다. 캐시를 우회하는 쿼리는 컴퓨팅 집약적이며, 데이터베이스를 위험에 노출시킨다. Read workload를 확장하기 위해 도입한 캐시를 우회해야하는 역설에 빠진다. 따라서 너무 많은 쿼리를 시스템에 보내면 안된다. 그래서 inconsistency sample이 특정 시간 척도(e.g. 1min, 5min)를 넘지 않을 때 까지 계산 집약적 작업 수행을 지연한다. 실제로 이렇게 처리하면 일시적 캐시 불일치를 회피하고, 캐시 우회 쿼리를 수행하기 위한 요구사항의 대부분을 제거할 수 있다.</p>
<p>또한 캐시 서버로 보내는 쿼리에 특수 플래그를 추가한다. 이를 통해 캐시 서버가 캐시 무효화 이벤트를 확인하고 처리했는지 여부를 알 수 있다. 이를 통해 일시적 캐시 불일치 인지, 영구적 캐시 불일치 인지 구분할 수 있다.</p>
<p>Polaris는 “N개의 캐시 쓰기가 M분 동안 일관됩니다”와 같은 항목을 측정한다. 그리고 프로덕션 서비스 및 워크로드와 독립적으로 확장할 수 있도록 별도의 서비스로 배포된다. 더 높은 해상도를 처리하려면 Polaris 처리량을 늘리거나 더 긴 시간동안 집계를 하도록 하면 된다.</p>
<h2 id="Consistency-tracing"><a href="#Consistency-tracing" class="headerlink" title="Consistency tracing"></a>Consistency tracing</h2><p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204230151362.png" alt=""></p>
<p>캐시는 AZ내, 또는 지역 전체에서 다양한 upstream으로 채워진다. Promotions, shard moves, failure recoveries, network partitions, hardware failure와 같은 오류는 모두 잠재적 캐시 불일치로 이어지는 버그를 유발시킬 수 있다.</p>
<p>그러나 앞서 언급했듯이 모든 캐시 데이터 변경을 기록, 추적하는 것은 비현실적이다. 분산 시스템에서 일부 지점만 추적하는 것으로는 모든 영역을 커버할 수 없다. 임무는 이런 복잡성을 관리하는데 도움이 되는 간단한 솔루션을 찾는 것이다. 방법 중 하나는 단일 캐시 서버 관점에서 전체 캐시 일관성 문제를 평가하는 것이다. 캐시 서버에 불일치가 발생할 때 몇 가지 측면에서의 관점만 관심을 가지면 된다.</p>
<ul>
<li>무효화를 수신했는가</li>
<li>무효화를 올바르게 처리했는가</li>
<li>나중에 항목이 일관성을 잃었는가</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204230523280.png" alt=""></p>
<p>이 것은 앞서 설명한 예를 space-time 다이어그램으로 나타낸 것이다. 캐시 호스트 타임라인에 집중하면 클라이언트 쓰기 후 무효화와 캐시 fill가 모두 캐시를 업데이트하기 위한 race window가 있음을 확인할 수 있다.</p>
<p>Potential racing window에서 발생하는 캐시 변형을 모두 기록하는 상태 저장 추적 라이브러리를 개발해 이 문제를 추적한다. 이를 통해 로그가 없어도 캐시 무효화 이벤트가 도착하지 않았는지 등을 판단할 수 있다. 이 라이브러리는 몇 가지 주요 캐시 서비스와 무효화 파이프라인 전체에 내장되어 있다. 이는 최근 수정된 데이터의 인덱스를 버퍼링해 후속 캐시 상태 변경 사항을 기록해야 하는지 여부를 결정하는데 사용된다. 또한 코드 추적을 지원하기 때문에 추적된 모든 쿼리에 대한 정확한 코드 경로를 알 수 있다. 이를 통해 캐시 불일치 진단에 대한 체계적이고 확장 가능한 접근 방식을 만들었고 효과적으로 입증했다.</p>
<h2 id="A-real-bug-we-found-and-fixed-this-year"><a href="#A-real-bug-we-found-and-fixed-this-year" class="headerlink" title="A real bug we found and fixed this year"></a>A real bug we found and fixed this year</h2><p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204231119569.png" alt=""></p>
<p>캐시에는 <code>metadata = 0 @ version 4</code>를 관찰했지만 데이터베이스에는 <code>metadata = 1 @ version 4</code>가 저장되어 있는 문제를 확인했다. 캐시는 무기한 적으로 일관성이 없는 상태였고, 이 상태는 불가능했어야 하지만 발생했다. Consistency tracing은 이런 문제를 진단하는데 필요한 타임라인을 정확히 제공했다.</p>
<p><img src="https://cdn.jsdelivr.net/gh/SongHayoung/image@master/uPic/image-20240204231304866.png" alt=""></p>
<p>시스템에서 기본 데이터베이스의 두 테이블(metadata, version)을 트랜잭션 방식으로 업데이트하는 매우 드문 작업이 있었다. 추적을 통해 아래 시나리오를 통해 발생할 수 있음을 확인했다.</p>
<ol>
<li>캐시가 메타데이터를 버전과 함께 채우려고 시도함</li>
<li>첫 번째 라운드에서는 캐시가 먼저 이전 메타데이터를 채움</li>
<li>다음으로 쓰기 트랜잭션은 메타데이터 테이블과 버전 테이블을 모두 원자적으로 업데이트</li>
<li>두 번째 라운드에서 캐시가 새 버전 데이터를 채움. 여기서 캐시 fill 작업은 데이터베이스 트랜잭션에서 전파됨. racing window가 매우 작기 때문에 거의 발생하지 않았고, 캐시 무효화는 캐시를 일관된 상태로 만들어야 하기 때문에 모든 것이 예상대로 동작했었음</li>
<li>나중에 캐시 항목을 새 메타데이터와 새 버전으로 업데이트하려고 시도하는 동안 캐시 무효화가 발생함. 거의 대부분의 경우 이는 잘 동작하지만 이번에는 그러지 않았음.</li>
<li>캐시 무효화로 인해 캐시 호스트에서 드물게 일시적인 오류 처리 코드가 트리거링 됨</li>
<li>오류 처리기가 캐시에서 항목을 삭제함</li>
</ol>
<p>버전이 지정된 것보다 낮으면 캐시에 항목을 삭제하라 하지만, 일치하지 않는 항목에는 최신 버전이 포함되어 있었음. 따라서 오류 처리기는 아무 작업을 하지 않았으며 오래된 메타데이터를 무기한 남겨두었음. 실제로는 데이터베이스 복제 및 지역간 통신 등 더욱 복잡했지만, Polaris를 통해 버그를 찾기 까지 30분밖에 걸리지 않았음.</p>
<!-- flag of hidden posts --></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Song Hayoung</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://songhayoung.github.io/2024/02/04/System%20Design/engineering/cache-made-consistent/">https://songhayoung.github.io/2024/02/04/System%20Design/engineering/cache-made-consistent/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/System-Design/">System Design</a></div><nav id="pagination"></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '3604b61642355579f55e',
  clientSecret: 'f552120f18ac5aee3f6297e05e97d94c0a25cd4b',
  repo: 'SongHayoung.github.io',
  owner: 'SongHayoung',
  admin: 'SongHayoung',
  id: md5(decodeURI(location.pathname)),
  language: 'en'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(https://xxxx.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2024 By Song Hayoung</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Learning how to walk slowly to not miss important things</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/algolia.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>